<!doctype html><html lang=en-us><head><title>åœ¨ubuntuä¸Šä½¿ç”¨clashï¼ˆè§£å†³è®¢é˜…åœ°å€ä¸å¯ç”¨çš„é—®é¢˜ï¼‰ | codex</title>
<meta charset=UTF-8><meta name=language content="en"><meta name=description content><meta name=keywords content="clash"><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><link rel="shortcut icon" type=image/png href=/favicon.png><link type=text/css rel=stylesheet href=/css/post.min.0557a25edf5f0d1ff7f064e4e3c180cb56ef6fb674d3d19d8550a053be6520ed.css integrity="sha256-BVeiXt9fDR/38GTk48GAy1bvb7Z009GdhVCgU75lIO0="><link type=text/css rel=stylesheet href=/css/custom.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css integrity="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU="><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/gali.fan\/"},"articleSection":"blog","name":"åœ¨ubuntuä¸Šä½¿ç”¨clashï¼ˆè§£å†³è®¢é˜…åœ°å€ä¸å¯ç”¨çš„é—®é¢˜ï¼‰","headline":"åœ¨ubuntuä¸Šä½¿ç”¨clashï¼ˆè§£å†³è®¢é˜…åœ°å€ä¸å¯ç”¨çš„é—®é¢˜ï¼‰","description":"","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"2024","datePublished":"2024-07-07 00:08:03 \u002b0800 \u002b0800","dateModified":"2024-07-07 00:08:03 \u002b0800 \u002b0800","url":"https:\/\/gali.fan\/blog\/240707-01\/","wordCount":"218","keywords":["clash","Blog"]}</script></head><body><div class=burger__container><div class=burger aria-controls=navigation aria-label=Menu><div class="burger__meat burger__meat--1"></div><div class="burger__meat burger__meat--2"></div><div class="burger__meat burger__meat--3"></div></div></div><nav class=nav id=navigation><ul class=nav__list><li><a href=/>about</a></li><li><a class=active href=/blog>blog</a></li></ul></nav><main><div class=flex-wrapper><div class=post__container><div class=post><header class=post__header><h1 id=post__title>åœ¨ubuntuä¸Šä½¿ç”¨clashï¼ˆè§£å†³è®¢é˜…åœ°å€ä¸å¯ç”¨çš„é—®é¢˜ï¼‰</h1><time datetime="2024-07-07 00:08:03 +0800 +0800" class=post__date>Jul 7 2024</time></header><article class=post__content><h2 id=å‚è€ƒæ–‡çŒ®>å‚è€ƒæ–‡çŒ®<a class=anchor href=#å‚è€ƒæ–‡çŒ®>#</a></h2><ol><li><a href=https://zhuanlan.zhihu.com/p/656856050 target=_blank rel="noreferrer noopener">å®‰å„¿ - Linuxä½¿ç”¨Clashï¼Œclash-for-linux</a></li><li><a href=https://zhuanlan.zhihu.com/p/692414049 target=_blank rel="noreferrer noopener">å¿µè¿¹ä¸˜æµ· - Linuxï¼ˆubuntuï¼‰ç³»ç»Ÿå®‰è£…å’Œä½¿ç”¨clash</a></li></ol><h2 id=å¼€å§‹>å¼€å§‹<a class=anchor href=#å¼€å§‹>#</a></h2><ol><li>ä¸‹è½½clashä¹‹åè§£å‹ï¼Œè¿›å…¥ç›®å½•</li></ol><pre><code class=language-bash>$ unzip clash-for-linux-master.zip
$ cd clash-for-linux-master
</code></pre><ol start=2><li>æŒ‰ç…§<code>README.md</code>æ–‡ä»¶é‡Œé‚£æ ·ï¼Œåœ¨<code>.env</code>æ–‡ä»¶é‡Œå†™å…¥è®¢é˜…åœ°å€å’Œ<code>secret</code>ï¼Œ<code>secret</code>å¯ä»¥å†™å¾—ç®€å•äº›ï¼Œåé¢è¦ç”¨</li></ol><pre><code class=language-bash>$ nano .env
</code></pre><p><img src=1.png alt></p><ol start=3><li>åœ¨<code>clash-for-linux-master</code>ç›®å½•ä¸‹æ‰§è¡Œï¼š</li></ol><pre><code class=language-bash>$ sudo bash start.sh
</code></pre><ol start=4><li>å¦‚æœåœ¨æ‰§è¡Œ<code>sudo bash start.sh</code>å‘½ä»¤æ—¶æŠ¥é”™<strong>è®¢é˜…åœ°å€ä¸å¯è®¿é—®</strong>ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</li></ol><p><img src=2.png alt></p><p>åŸå› å¯èƒ½æ˜¯è®¿é—®è¿™æ¡é“¾æ¥æœ¬èº«éœ€è¦æ¢¯å­ğŸ˜…ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬<strong>æ‰‹åŠ¨å°†è®¢é˜…é“¾æ¥è½¬æˆyamlæ–‡ä»¶</strong>ï¼Œç„¶åä¿®æ”¹<code>start.sh</code>è„šæœ¬ã€‚</p><p>æˆ‘æ²¡æœ‰æ‰¾åˆ°æ¯”è¾ƒå¥½çš„è®¢é˜…é“¾æ¥è½¬yamlæ–‡ä»¶çš„å·¥å…·ï¼Œä½†æ˜¯å‘ç°å®‰å“ç‰ˆçš„clashå¯ä»¥å¯¼å‡ºyamlæ–‡ä»¶ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><p><img src=3.png alt></p><p>ç„¶åå°†è¯¥ymlæ–‡ä»¶æ”¾åˆ°<code>temp</code>æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶é‡å‘½åä¸º<code>clash_config.yaml</code></p><pre><code class=language-bash>$ mv clash_config.yaml clash-for-linux-master/temp/  # æˆ‘å…ˆæ”¹çš„åå­—ï¼Œå…ˆåé¡ºåºæ— æ‰€è°“
</code></pre><p>ç„¶åä¿®æ”¹<code>start.sh</code>è„šæœ¬ï¼Œå°†é…ç½®æ–‡ä»¶ä¸‹è½½éƒ¨åˆ†å’Œé‡å‘½åéƒ¨åˆ†æ³¨é‡Šæ‰ï¼Œå¤§æ¦‚åœ¨ç¬¬ä¸€ç™¾è¡Œå·¦å³</p><pre><code class=language-bash>    ...

## ä¸´æ—¶å–æ¶ˆç¯å¢ƒå˜é‡
unset http_proxy
unset https_proxy
unset no_proxy
unset HTTP_PROXY
unset HTTPS_PROXY
unset NO_PROXY


## Clash è®¢é˜…åœ°å€æ£€æµ‹åŠé…ç½®æ–‡ä»¶ä¸‹è½½
# æ£€æŸ¥urlæ˜¯å¦æœ‰æ•ˆ
#echo -e '\næ­£åœ¨æ£€æµ‹è®¢é˜…åœ°å€...'
#Text1=&quot;Clashè®¢é˜…åœ°å€å¯è®¿é—®ï¼&quot;
#Text2=&quot;Clashè®¢é˜…åœ°å€ä¸å¯è®¿é—®ï¼&quot;
##curl -o /dev/null -s -m 10 --connect-timeout 10 -w %{http_code} $URL | grep '[23][0-9][0-9]' &amp;&gt;/dev/null
#curl -o /dev/null -L -k -sS --retry 5 -m 10 --connect-timeout 10 -w &quot;%{http_code}&quot; $URL | grep -E '^[23][0-9]{2}$' &amp;&gt;/dev/null
#ReturnStatus=$?
#if_success $Text1 $Text2 $ReturnStatus

# æ‹‰å–æ›´æ–°config.ymlæ–‡ä»¶
#echo -e '\næ­£åœ¨ä¸‹è½½Clashé…ç½®æ–‡ä»¶...'
#Text3=&quot;é…ç½®æ–‡ä»¶config.yamlä¸‹è½½æˆåŠŸï¼&quot;
#Text4=&quot;é…ç½®æ–‡ä»¶config.yamlä¸‹è½½å¤±è´¥ï¼Œé€€å‡ºå¯åŠ¨ï¼&quot;

# å°è¯•ä½¿ç”¨curlè¿›è¡Œä¸‹è½½
#curl -L -k -sS --retry 5 -m 10 -o $Temp_Dir/clash.yaml $URL
#ReturnStatus=$?
#if [ $ReturnStatus -ne 0 ]; then
	# å¦‚æœä½¿ç”¨curlä¸‹è½½å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨wgetè¿›è¡Œä¸‹è½½
#	for i in {1..10}
#	do
#		wget -q --no-check-certificate -O $Temp_Dir/clash.yaml $URL
#		ReturnStatus=$?
#		if [ $ReturnStatus -eq 0 ]; then
#			break
#		else
#			continue
#		fi
#	done
#fi
#if_success $Text3 $Text4 $ReturnStatus

# é‡å‘½åclashé…ç½®æ–‡ä»¶
#\cp -a $Temp_Dir/clash.yaml $Temp_Dir/clash_config.yaml


## åˆ¤æ–­è®¢é˜…å†…å®¹æ˜¯å¦ç¬¦åˆclashé…ç½®æ–‡ä»¶æ ‡å‡†ï¼Œå°è¯•è½¬æ¢ï¼ˆå½“å‰ä¸æ”¯æŒå¯¹ x86_64 ä»¥å¤–çš„CPUæ¶æ„æœåŠ¡å™¨è¿›è¡Œclashé…ç½®æ–‡ä»¶æ£€æµ‹å’Œè½¬æ¢ï¼Œæ­¤åŠŸèƒ½å°†åœ¨åç»­æ·»åŠ ï¼‰
if [[ $CpuArch =~ &quot;x86_64&quot; || $CpuArch =~ &quot;amd64&quot;  ]]; then
	echo -e '\nåˆ¤æ–­è®¢é˜…å†…å®¹æ˜¯å¦ç¬¦åˆclashé…ç½®æ–‡ä»¶æ ‡å‡†:'
	bash $Server_Dir/scripts/clash_profile_conversion.sh
	sleep 3
fi

    ...
</code></pre><p>ä¹‹åæ‰§è¡Œ<code>sudo bash start.sh</code>å°±ä¼šæˆåŠŸå¯åŠ¨æœåŠ¡</p><p><img src=4.png alt></p><ol start=5><li>æµè§ˆå™¨è®¿é—®<code>127.0.0.1:9090/ui</code>ï¼Œè¿›å…¥ä¹‹åç•Œé¢åº”è¯¥å¦‚ä¸‹ï¼š</li></ol><p><img src=5.png alt></p><p>URLéƒ¨åˆ†å¡«<code>http://127.0.0.1:9090</code>ï¼Œsecretéƒ¨åˆ†å¡«ä¹‹å‰<code>.env</code>æ–‡ä»¶é‡Œå†™çš„ï¼Œå‰é¢å†™çš„123ï¼Œlabeléšä¾¿å¡«</p><ol start=6><li>ç‚¹å‡»addä¹‹å</li></ol><p><img src=6.png alt></p><ol start=7><li>ç‚¹å‡»ä¸‹æ–¹å°±ä¼šè¿›å…¥clashç•Œé¢ï¼Œè‹¥è¦è¿”å›ç¬¬5æ­¥çš„ç•Œé¢åªéœ€è¦ç‚¹å‡»<code>Config--Action--Switch backend</code>å³å¯</li></ol><p><img src=7.png alt></p><ol start=8><li>æŒ‰ç…§README.mdç»§ç»­æ‰§è¡Œä»¥ä¸‹ä»£ç </li></ol><pre><code class=language-bash>$ source /etc/profile.d/clash.sh
$ proxy_on
</code></pre><ol start=9><li>è¿˜éœ€è¦æœ€åä¸€æ­¥ï¼Œåœ¨ç½‘ç»œè®¾ç½®é‡Œè®¾ç½®ä»£ç†ç«¯å£
å¡«ä¸Šè‡ªèº«IPï¼Œç«¯å£è®¾ç½®7890
<img src=8.png alt></li></ol><h3 id=æ­¤æ—¶clashæœåŠ¡åº”è¯¥å°±æ‰“å¼€äº†æœ‰ä»»ä½•é—®é¢˜å¯ä»¥ç»™æˆ‘å‘é‚®ä»¶>æ­¤æ—¶clashæœåŠ¡åº”è¯¥å°±æ‰“å¼€äº†ï¼Œæœ‰ä»»ä½•é—®é¢˜å¯ä»¥ç»™æˆ‘å‘é‚®ä»¶ã€‚<a class=anchor href=#æ­¤æ—¶clashæœåŠ¡åº”è¯¥å°±æ‰“å¼€äº†æœ‰ä»»ä½•é—®é¢˜å¯ä»¥ç»™æˆ‘å‘é‚®ä»¶>#</a></h3></article><ul class=tags__list><li class=tag__item><a class=tag__link href=https://gali.fan/tags/clash/>clash</a></li><li class=tag__item><a class=tag__link href=https://gali.fan/tags/ubuntu/>ubuntu</a></li></ul><div class=pagination><a class=pagination__item href=https://gali.fan/blog/240707-02/><span class=pagination__label>Next Post</span>
<span class=pagination__title>æˆ‘å·²ä¸åœ¨ä»™ç•Œå¥½å¤šå¹´</span></a></div><footer class=post__footer><div class=social-icons><a class=social-icons__link title=GitHub href=https://github.com/yueluz target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://gali.fan/svg/github.svg)></div></a><a class=social-icons__link title=Email href=mailto:%3coscink@163.com%3e target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://gali.fan/svg/email.svg)></div></a><a class=social-icons__link title=QQ href=svg/qq.svg target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://gali.fan/svg/qq.svg)></div></a><a class=social-icons__link title=Wechat href=https://baidu.com target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://gali.fan/svg/wechat.svg)></div></a></div><p>Â© 2024</p></footer></div></div></div></main><script src=/js/index.min.301a8b0870381bf76b3b5182e8966d363a0474281183439beb024d8b8228fc66.js integrity="sha256-MBqLCHA4G/drO1GC6JZtNjoEdCgRg0Ob6wJNi4Io/GY=" crossorigin=anonymous></script><script src=https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js></script><script src=https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js data-autoloader-path=https://unpkg.com/prismjs@1.20.0/components/></script></body></html>