<!doctype html><html lang=en-us><head><title>通过Actions推送部署GithubPages域名被解绑问题解决 | codex</title>
<meta charset=UTF-8><meta name=language content="en"><meta name=description content="hugo通过Action部署之后，域名会被解绑"><meta name=keywords content="hugo ,Github Action ,Github Pages"><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><link rel="shortcut icon" type=image/png href=/favicon.png><link type=text/css rel=stylesheet href=/css/post.min.86d1effd4c412b85ac13db53a90c473a0f256f789b821e131125c9aa25cb6a6d.css integrity="sha256-htHv/UxBK4WsE9tTqQxHOg8lb3ibgh4TESXJqiXLam0="><link type=text/css rel=stylesheet href=/css/custom.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css integrity="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU="><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/gali.fan\/"},"articleSection":"blog","name":"通过Actions推送部署GithubPages域名被解绑问题解决","headline":"通过Actions推送部署GithubPages域名被解绑问题解决","description":"hugo通过Action部署之后，域名会被解绑","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"2024","datePublished":"2024-07-07 12:48:05 \u002b0800 \u002b0800","dateModified":"2024-07-07 12:48:05 \u002b0800 \u002b0800","url":"https:\/\/gali.fan\/blog\/%E8%BF%87actions%E6%8E%A8%E9%80%81%E9%83%A8%E7%BD%B2githubpages%E5%9F%9F%E5%90%8D%E8%A2%AB%E8%A7%A3%E7%BB%91%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3\/","wordCount":"58","keywords":["hugo","Github Action","Github Pages","Blog"]}</script></head><body><div class=burger__container><div class=burger aria-controls=navigation aria-label=Menu><div class="burger__meat burger__meat--1"></div><div class="burger__meat burger__meat--2"></div><div class="burger__meat burger__meat--3"></div></div></div><nav class=nav id=navigation><ul class=nav__list><li><a href=/>about</a></li><li><a class=active href=/blog>blog</a></li></ul></nav><main><div class=flex-wrapper><div class=post__container><div class=post><header class=post__header><h1 id=post__title>通过Actions推送部署GithubPages域名被解绑问题解决</h1><time datetime="2024-07-07 12:48:05 +0800 +0800" class=post__date>Jul 7 2024</time></header><article class=post__content><h3 id=问题描述>问题描述<a class=anchor href=#问题描述>#</a></h3><p>使用Github Action将hugo生成的public文件夹推送到github.io仓库时，pages绑定的域名会被自动解绑，导致访问报404</p><h3 id=解决办法>解决办法<a class=anchor href=#解决办法>#</a></h3><ol><li>在hugo项目根目录创建一个名为<code>static</code>的文件夹（如果它还不存在），这个文件夹中的内容会被hugo直接复制到生成的<code>public</code>文件夹中。</li><li>在<code>static</code>文件夹中创建一个名为<code>CNAME</code>的文件，并在其中写入你的域名。以本站为例：</li></ol><pre><code class=language-bash>$ echo &quot;gali.fan&quot; &gt;&gt; static/CNAME
</code></pre><ol start=3><li>确保Github Actions工作流中，不会删除或忽略<code>CNAME</code>文件。修改Github Actions工作流文件：</li></ol><pre><code class=language-yaml># gh-pages.yml
    ...

- name: Deploy
uses: peaceiris/actions-gh-pages@v3	# 一个自动发布github pages的action
with:
    # github_token: ${{ secrets.GITHUB_TOKEN }} 该项适用于发布到源码相同repo的情况，不能用于发布到其他repo
    external_repository: yueluz/yueluz.github.io	# 发布到哪个repo
    personal_token: ${{ secrets.ACTION_ACCESS_TOKEN }}	# 发布到其他repo需要提供上面生成的personal access token
    publish_dir: ./public	# 注意这里指的是要发布哪个文件夹的内容，而不是指发布到目的仓库的什么位置，因为hugo默认生成静态网页到public文件夹，所以这里发布public文件夹里的内容
    publish_branch: main	# 发布到哪个branch
    cname: gali.fan  # 确保域名不会被解除 &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;增加内容&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;

    ...
</code></pre></article><ul class=tags__list><li class=tag__item><a class=tag__link href=https://gali.fan/tags/hugo/>hugo</a></li><li class=tag__item><a class=tag__link href=https://gali.fan/tags/github-action/>Github Action</a></li><li class=tag__item><a class=tag__link href=https://gali.fan/tags/github-pages/>Github Pages</a></li></ul><div class=pagination><a class=pagination__item href=https://gali.fan/blog/%E9%80%80%E5%87%BA%E6%B1%9F%E6%B9%96/><span class=pagination__label>Previous Post</span>
<span class=pagination__title>我已不在仙界好多年</span></a></div><footer class=post__footer><div class=social-icons><a class=social-icons__link title=GitHub href=https://github.com/yueluz target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://gali.fan/svg/github.svg)></div></a><a class=social-icons__link title=Email href=mailto:%3coscink@163.com%3e target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://gali.fan/svg/email.svg)></div></a><a class=social-icons__link title=QQ href=svg/qq.svg target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://gali.fan/svg/qq.svg)></div></a><a class=social-icons__link title=Wechat href=https://baidu.com target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://gali.fan/svg/wechat.svg)></div></a></div><p>© 2024</p></footer></div></div></div></main><script src=/js/index.min.301a8b0870381bf76b3b5182e8966d363a0474281183439beb024d8b8228fc66.js integrity="sha256-MBqLCHA4G/drO1GC6JZtNjoEdCgRg0Ob6wJNi4Io/GY=" crossorigin=anonymous></script><script src=https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js></script><script src=https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js data-autoloader-path=https://unpkg.com/prismjs@1.20.0/components/></script></body></html>